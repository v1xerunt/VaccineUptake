(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7641:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.bind(s,3878)),Promise.resolve().then(s.bind(s,6971)),Promise.resolve().then(s.bind(s,8715))},6971:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var a=s(5155),r=s(2115),l=s(8217),n=s(1567);let i=l.bL,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.B8,{ref:t,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=l.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r})});d.displayName=l.l9.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})}).displayName=l.UC.displayName;var c=s(5111),u=s(4714);let m=()=>{let{mode:e,setMode:t}=(0,c.C)((0,u.k)(e=>({mode:e.mode,setMode:e.setMode})));return(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{children:"Display Mode:"}),(0,a.jsx)(i,{value:e,onValueChange:e=>t(e),children:(0,a.jsxs)(o,{className:"bg-zinc-200 cursor-pointer",children:[(0,a.jsx)(d,{value:c.v.MAP,children:"Map Only"}),(0,a.jsx)(d,{value:c.v.TABLE,children:"Data Table"}),(0,a.jsx)(d,{value:c.v.BOTH,children:"Both"})]})})]})}},8715:(e,t,s)=>{"use strict";s.d(t,{FilterPanel:()=>z});var a=s(5155),r=s(2115),l=s(7081),n=s(2488),i=s(2645),o=s(3312),d=s(8369);let c=d.bL,u=d.R6,m=d.Ke;var f=s(5111),h=s(520),p=s(7193),x=s(1567);let v=h.bL;h.YJ;let b=h.WT,g=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(h.l9,{ref:t,className:(0,x.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(h.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=h.l9.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.PP,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});j.displayName=h.PP.displayName;let y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.wn,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});y.displayName=h.wn.displayName;let N=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...n}=e;return(0,a.jsx)(h.ZL,{children:(0,a.jsxs)(h.UC,{ref:t,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,a.jsx)(j,{}),(0,a.jsx)(h.LM,{className:(0,x.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(y,{})]})})});N.displayName=h.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.JU,{ref:t,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",s),...r})}).displayName=h.JU.displayName;let w=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(h.q7,{ref:t,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(h.VF,{children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})}),(0,a.jsx)(h.p4,{children:r})]})});w.displayName=h.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=h.wv.displayName;var k=s(532);let C=k.bL,F=k.l9;k.Mz;let O=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...n}=e;return(0,a.jsx)(k.ZL,{children:(0,a.jsx)(k.UC,{ref:t,align:r,sideOffset:l,className:(0,x.cn)("z-50 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});O.displayName=k.UC.displayName;var A=s(8346),P=s(689),R=s(5325);function S(e){let{options:t,placeholder:s="请选择",value:l=[],onChange:n,className:i,disabled:d=!1}=e,[c,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)([t]),h=e=>{n&&n(e)},v=e=>l.some(t=>t.length===e.length&&t.every((t,s)=>t===e[s])),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[...t,e.value];return e.children&&0!==e.children.length?e.children.flatMap(e=>b(e,s)):[s]},g=(e,t)=>{let s;if(j(e,t)){let a=b(e,t);s=l.filter(e=>!a.some(t=>t.length===e.length&&t.every((t,s)=>t===e[s])))}else{let a=b(e,t);s=[...l.filter(e=>!a.some(t=>t.length===e.length&&t.every((t,s)=>t===e[s]))),...a]}h(s)},j=(e,t)=>!!e.children&&0!==e.children.length&&b(e,t).every(e=>v(e)),y=(e,t)=>{if(!e.children||0===e.children.length)return!1;let s=b(e,t),a=s.some(e=>v(e)),r=s.every(e=>v(e));return a&&!r},N=e=>{h(v(e)?l.filter(t=>!(t.length===e.length&&t.every((t,s)=>t===e[s]))):[...l,[...e]])},w=(e,t)=>{if(e.disabled)return;let s=[...m.slice(0,t+1)];e.children&&e.children.length>0&&s.push(e.children),f(s)};return(0,a.jsxs)(C,{open:c,onOpenChange:e=>{u(e),e&&f([t])},children:[(0,a.jsx)(F,{asChild:!0,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(o.$,{variant:"outline",className:(0,x.cn)("w-full justify-between",l.length>0?"":"text-muted-foreground",d&&"opacity-50 cursor-not-allowed",i),disabled:d,children:[(0,a.jsx)("span",{className:"truncate",children:0===l.length?s:1===l.length?(e=>{let s=[],a=t;for(let t of e){let e=a.find(e=>e.value===t);if(!e)break;s.push(e.label),a=e.children||[]}return s.join(" / ")})(l[0]):"".concat(l.length," selected")}),(0,a.jsx)(A.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),l.length>0&&(0,a.jsx)(o.$,{variant:"ghost",size:"sm",className:"absolute right-8 top-1/2 -translate-y-1/2 h-5 w-5 p-0 rounded-full",onClick:e=>{e.stopPropagation(),h([])},children:(0,a.jsx)(P.A,{className:"h-3 w-3"})})]})}),(0,a.jsxs)(O,{align:"start",className:"p-0 flex flex-col",children:[(0,a.jsx)("div",{className:"flex border-b border-border",children:m.map((e,t)=>{let s=function(e,t){let s=[];if(0===e)return s;for(let a=0;a<e;a++){let e=t[a],r=t[a+1],l=e.find(e=>e.children&&JSON.stringify(e.children)===JSON.stringify(r));if(l)s.push(l.value);else{let t=e[0];t&&s.push(t.value)}}return s}(t,m);return(0,a.jsx)("div",{className:(0,x.cn)("max-h-[300px] overflow-auto min-w-[160px]",t>0&&"border-l border-border"),children:e.map(e=>{let r=[...s,e.value],l=!e.children||0===e.children.length,n=!l&&j(e,s),i=!l&&y(e,s),o=l&&v(r);return(0,a.jsx)("div",{className:(0,x.cn)("relative flex items-center px-2 py-1.5 text-sm hover:bg-muted cursor-pointer",e.disabled&&"opacity-50 cursor-not-allowed"),onClick:()=>w(e,t),children:(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("div",{className:"mr-2 h-4 w-4 flex-shrink-0",onClick:t=>{t.stopPropagation(),e.disabled||(l?N(r):g(e,s))},children:(0,a.jsxs)("div",{className:(0,x.cn)("h-4 w-4 rounded border border-primary flex items-center justify-center",(o||n)&&"bg-primary"),children:[i&&(0,a.jsx)("div",{className:"h-2 w-2 bg-primary rounded-sm"}),(o||n)&&(0,a.jsx)(p.A,{className:"h-3 w-3 text-primary-foreground"})]})}),(0,a.jsx)("span",{className:"flex-grow truncate",children:e.label}),!l&&(0,a.jsx)(R.A,{className:"h-4 w-4 ml-2 opacity-50"})]})},e.value)})},"col-".concat(t))})}),(0,a.jsxs)("div",{className:"p-2 flex justify-between",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>h([]),disabled:0===l.length,children:"Clear"}),(0,a.jsx)(o.$,{size:"sm",onClick:()=>u(!1),children:"Done"})]})]})]})}function z(){let e=(0,f.C)(e=>e.updateMap);(0,r.useEffect)(()=>{e()},[e]);let t=(0,f.C)(e=>e.form);console.log("formValues",t);let s=(0,f.C)(e=>e.updateForm),d=(0,f.C)(e=>e.updateSingleFormItem),h=(0,f.C)(e=>e.countryOptions),p=(0,f.C)(e=>e.subFilterKeyOptions),x=(0,r.useMemo)(()=>h.map(e=>({label:e.label,value:e.value,children:e.cities})),[h]),j=e=>t=>{d(e,t)},[y,k]=(0,r.useState)(!0),[C,F]=(0,r.useState)(!0),[O,A]=(0,r.useState)([]);return(0,r.useEffect)(()=>{var e,s;let a=p.find(e=>e.value===t.subFilterKey);A(null!==(e=null==a?void 0:a.options)&&void 0!==e?e:[]),d("subFilterValue",null!==(s=null==a?void 0:a.options[0].value)&&void 0!==s?s:"total")},[t.subFilterKey,p,d]),(0,a.jsxs)("div",{className:"h-full w-[300px] border-r bg-card flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Filters"})}),(0,a.jsxs)(c,{open:y,onOpenChange:k,className:"border rounded-md bg-card",children:[(0,a.jsxs)(u,{className:"flex w-full items-center justify-between p-4 font-medium",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-muted-foreground"}),"Primary Filters"]}),y?(0,a.jsx)(n.A,{className:"h-4 w-4"}):(0,a.jsx)(i.A,{className:"h-4 w-4"})]}),(0,a.jsx)(m,{className:"px-4 pb-4 space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Countries"}),(0,a.jsx)(S,{options:x,placeholder:"Select Countries",value:t.countries,onChange:j("countries")})]})})]}),(0,a.jsxs)(c,{open:C,onOpenChange:F,className:"border rounded-md bg-card",children:[(0,a.jsxs)(u,{className:"flex w-full items-center justify-between p-4 font-medium",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-muted-foreground"}),"Secondary Filters"]}),C?(0,a.jsx)(n.A,{className:"h-4 w-4"}):(0,a.jsx)(i.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(m,{className:"px-4 pb-4 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"filter key"}),(0,a.jsxs)(v,{onValueChange:j("subFilterKey"),value:t.subFilterKey,children:[(0,a.jsx)(g,{className:"w-full",children:(0,a.jsx)(b,{placeholder:"Select a filter key"})}),(0,a.jsx)(N,{children:p.map(e=>{let{value:t,label:s}=e;return(0,a.jsx)(w,{value:t,children:s},t)})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"filter value"}),(0,a.jsxs)(v,{onValueChange:j("subFilterValue"),value:t.subFilterValue,children:[(0,a.jsx)(g,{className:"w-full",children:(0,a.jsx)(b,{placeholder:"Select a filter value"})}),(0,a.jsx)(N,{children:O.map(e=>{let{value:t,label:s}=e;return(0,a.jsx)(w,{value:t,children:s},t)})})]})]})]})]})]}),(0,a.jsx)("div",{className:"border-t p-4 flex justify-between gap-2 bg-background sticky bottom-0",children:(0,a.jsx)(o.$,{variant:"outline",className:"flex-1",onClick:()=>{s({countries:h.reduce((e,t)=>e.concat(t.cities.map(e=>[t.value,e.value])),[]),subFilterKey:"total",subFilterValue:"total"})},children:"Reset"})})]})}},3878:(e,t,s)=>{"use strict";s.d(t,{FilterTabs:()=>d});var a=s(5155),r=s(1567),l=s(8173),n=s.n(l),i=s(6046);let o=[{link:"/nirsevimab",tab:"Nirsevimab"},{link:"/older-adults",tab:"RSV vaccine for older adults"},{link:"/maternal",tab:"RSV maternal vaccine"}];function d(){let e=(0,i.usePathname)();return(0,a.jsx)("div",{className:"inline-flex items-center rounded-lg border bg-card p-1 text-card-foreground shadow-sm",children:o.map(t=>(0,a.jsx)(n(),{href:t.link,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e===t.link?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:t.tab},t.link))})}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(5155),r=s(2115),l=s(2317),n=s(1027),i=s(1567);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(3463),r=s(9795);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5111:(e,t,s)=>{"use strict";s.d(t,{C:()=>l,v:()=>r});var a=s(9827),r=function(e){return e.MAP="MapOnly",e.TABLE="DataTable",e.BOTH="Both",e}({});let l=(0,a.v)(e=>({mode:"Both",setMode:t=>e({mode:t}),mapData:[],originalData:[],countryOptions:[],interventionOptions:[],popluationOptions:[],studyOptions:[],healthOptions:[],settingOptions:[],subFilterKeyOptions:[],form:{countries:[],subFilterKey:"total",subFilterValue:"total"},updateForm:t=>{e({form:t})},updateSingleFormItem:(t,s)=>{e(e=>({form:{...e.form,[t]:s}}))},setOptions:t=>{e({...t})},updateMap:async()=>{let t=await fetch("".concat("/VaccineUptake","/data/world-data.json")).then(e=>e.json());e({originalData:t,mapData:t.map(e=>({name:e.country,value:parseFloat(e.uptake.replace("%","")),details:e}))})}}))},347:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[690,576,424,441,517,358],()=>t(7641)),_N_E=e.O()}]);