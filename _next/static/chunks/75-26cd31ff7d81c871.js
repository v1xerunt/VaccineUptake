"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{9e3:(e,t,a)=>{a.d(t,{K:()=>n});var r=a(5111),l=a(2115),s=a(4714);let n=e=>{let{mapData:t,form:a,setOptions:n,updateForm:i}=(0,r.C)((0,s.k)(e=>({mapData:e.mapData,form:e.form,setOptions:e.setOptions,updateForm:e.updateForm}))),[o,d]=(0,l.useState)(!1),u=(0,l.useMemo)(()=>t.filter(t=>t.details.intervention===e),[t,e]),c=(0,l.useMemo)(()=>u.filter(e=>{var t,r,l,s;if(a.countries.length&&!a.countries.includes(e.details.country))return!1;if(a.showCities){if("NA"===e.details.city)return!1}else if("NA"!==e.details.city)return!1;return(null===(t=a.populations)||void 0===t||!t.length||!!a.populations.includes(e.details.population))&&(null===(r=a.studies)||void 0===r||!r.length||!!a.studies.includes(e.details.study))&&(null===(l=a.health)||void 0===l||!l.length||!!a.health.includes(e.details.healthStatus))&&(null===(s=a.settings)||void 0===s||!s.length||!!a.settings.includes(e.details.setting))&&a.subFilterKey===e.details.subFilterKey&&(!a.subFilterValue||a.subFilterValue===e.details.subFilterValue)}),[u,a]),m=(0,l.useCallback)(()=>{let e=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.country}))),t=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.intervention}))),a=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.population}))),r=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.subFilterKey}))),l=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.study}))),s=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.healthStatus}))),o=Array.from(new Set(u.map(e=>{let{details:t}=e;return t.setting})));n({countryOptions:e.map(e=>({value:e,label:e,cities:Array.from(new Set(u.filter(t=>{let{details:a}=t;return a.country===e}).map(e=>{let{details:t}=e;return t.city}))).map(e=>({value:e,label:e}))})),interventionOptions:t.concat("All").map(e=>({value:e,label:e})),popluationOptions:a.map(e=>({value:e,label:e})),studyOptions:l.map(e=>({value:e,label:e})),healthOptions:s.map(e=>({value:e,label:e})),settingOptions:o.map(e=>({value:e,label:e})),subFilterKeyOptions:r.map(e=>({value:e,label:e,options:Array.from(new Set(u.filter(t=>{let{details:a}=t;return a.subFilterKey===e}).map(e=>{let{details:t}=e;return t.subFilterValue}))).map(e=>({value:e,label:e}))}))}),i({countries:e,showCities:!1,studies:[l[0]],health:[s[0]],settings:[o[0]],populations:[a[0]],subFilterKey:"total",subFilterValue:"total"})},[u,n,i]);return(0,l.useEffect)(()=>{!o&&u.length&&(m(),d(!0))},[u,m,o,d]),{mapData:c,resetOptions:m}}},3404:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(5155),l=a(3312),s=a(2115),n=a(1567);let i=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...l})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...l})});o.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...l})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let u=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});u.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});c.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var f=a(5111),p=a(9789),h=a(9083),v=a(8729);let b=[{id:"details11",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").id},header:"id"},{accessorKey:"name",header:"Country"},{id:"details",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").study},header:"Study"},{id:"details1",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").city},header:"City or state"},{id:"details2",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").population},header:"Overall age"},{id:"details3",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").healthStatus},header:"Health status"},{id:"details4",accessorKey:"details",cell:e=>{let{row:t}=e;return t.getValue("details").setting},header:"Setting"},{id:"details5",accessorKey:"details",cell:e=>{let{row:t}=e;return"".concat(t.getValue("details").subFilterKey," : ").concat(t.getValue("details").subFilterValue)},header:"Filter"},{accessorKey:"value",header:e=>{let{column:t}=e;return(0,r.jsxs)(l.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["uptake",(0,r.jsx)(v.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return"".concat(t.getValue("value"),"%")}}],g=e=>{var t;let{mapData:a}=e,l=(0,f.C)(e=>e.mode===f.v.TABLE||e.mode===f.v.BOTH),[n,v]=(0,s.useState)([]),g=(0,p.N4)({columns:b,data:a,getCoreRowModel:(0,h.HT)(),onSortingChange:v,getSortedRowModel:(0,h.h5)(),state:{sorting:n}});return l?(0,r.jsx)("div",{className:"h-full grow shrink basis-0 p-4",children:(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(i,{children:[(0,r.jsx)(o,{children:g.getHeaderGroups().map(e=>(0,r.jsx)(u,{children:e.headers.map(e=>(0,r.jsx)(c,{children:e.isPlaceholder?null:(0,p.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(d,{children:(null===(t=g.getRowModel().rows)||void 0===t?void 0:t.length)?g.getRowModel().rows.map(e=>(0,r.jsx)(u,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(m,{children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(u,{children:(0,r.jsx)(m,{colSpan:b.length,className:"h-24 text-center",children:"No results."})})})]})})}):null}},8940:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(5155),l=a(2115),s=a(3609);let n=e=>{let{loadingText:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded-full animate-bounce"})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:t})]})};var i=a(5111),o=a(4714);function d(e){let{loadingText:t,mapData:d}=e,u=(0,l.useRef)(null),c=(0,l.useRef)(null),[m,f]=(0,l.useState)(!0),[p,h]=(0,l.useState)(null),{shouldRender:v,mode:b}=(0,i.C)((0,o.k)(e=>({shouldRender:e.mode===i.v.MAP||e.mode===i.v.BOTH,mode:e.mode})));return((0,l.useEffect)(()=>{if(b===i.v.TABLE||0===d.length)return;let e=!0;(async()=>{if(u.current)try{f(!0);let{default:t}=await a.e(806).then(a.t.bind(a,6361,19));if(!e)return;s.mz("world",t),c.current=s.Ts(u.current);let r={backgroundColor:"#ffffff",tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,formatter:function(e){let{name:t,value:a,data:r}=e;return r.details?1===d.length?'  \n                <div style="font-weight: bold; margin-bottom: 5px;">'.concat(t,"</div>  \n                <div>uptake: ").concat(a+"%","</div>\n                "):'  \n                <div style="font-weight: bold; margin-bottom: 5px;">'.concat(t,"</div>  \n                <div>uptake: ").concat(a+"%","</div>\n                <br />\n                ")+d.filter(e=>e.name===t).map(e=>"\n                      <div>".concat(e.details.city,": ").concat(e.details.uptake,"</div>\n                    ")).join(""):t}},visualMap:{left:"right",min:0,max:100,inRange:{color:["#e5f7ff","#096dd9"]},text:["heigh","low"],calculable:!0,dimension:0,orient:"vertical",right:26,bottom:40,show:!1},series:[{name:"World Map",type:"map",map:"world",roam:!0,scaleLimit:{min:1,max:10},emphasis:{label:{show:!0,fontSize:18,color:"#333"},itemStyle:{areaColor:"#40a9ff"}},select:{label:{show:!0,color:"#fff"},itemStyle:{areaColor:"#1890ff"}},itemStyle:{areaColor:"#f0f2f5",borderColor:"#d9d9d9",borderWidth:1},data:function(e){let t={};return e.forEach(e=>{t[e.name]?(t[e.name].sum+=e.value,t[e.name].count+=1):t[e.name]={sum:e.value,count:1}}),Object.keys(t).map(a=>({name:a,value:Number((t[a].sum/t[a].count).toFixed(2)),details:e.find(e=>e.name===a).details}))}(d)}]};c.current.setOption(r),f(!1)}catch(e){console.error("Chart initialization error:",e),h(e instanceof Error?e.message:"unknow error"),f(!1)}})();let t=()=>{var e;null===(e=c.current)||void 0===e||e.resize()};return window.addEventListener("resize",t),()=>{var a;e=!1,window.removeEventListener("resize",t),null===(a=c.current)||void 0===a||a.dispose()}},[b,d]),v)?p?(0,r.jsx)("div",{className:"h-full flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-red-500",children:["错误: ",p]})}):(0,r.jsxs)("div",{className:"h-full grow-[2] shrink-[2] basis-0 relative",children:[m&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 z-10",children:(0,r.jsx)(n,{loadingText:t})}),(0,r.jsx)("div",{ref:u,className:"w-full h-full max-h-screen min-h-[500px]"})]}):null}},3312:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(5155),l=a(2115),s=a(2317),n=a(1027),i=a(1567);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:l,size:n,asChild:d=!1,...u}=e,c=d?s.DX:"button";return(0,r.jsx)(c,{className:(0,i.cn)(o({variant:l,size:n,className:a})),ref:t,...u})});d.displayName="Button"},1567:(e,t,a)=>{a.d(t,{cn:()=>s});var r=a(3463),l=a(9795);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,r.$)(t))}},5111:(e,t,a)=>{a.d(t,{C:()=>s,v:()=>l});var r=a(9827),l=function(e){return e.MAP="MapOnly",e.TABLE="DataTable",e.BOTH="Both",e}({});let s=(0,r.v)(e=>({mode:"MapOnly",setMode:t=>e({mode:t}),mapData:[],originalData:[],countryOptions:[],interventionOptions:[],popluationOptions:[],studyOptions:[],healthOptions:[],settingOptions:[],subFilterKeyOptions:[],form:{countries:[],showCities:!1,subFilterKey:"total",subFilterValue:"total"},updateForm:t=>{e({form:t})},updateSingleFormItem:(t,a)=>{e(e=>({form:{...e.form,[t]:a}}))},setOptions:t=>{e({...t})},updateMap:async()=>{let t=await fetch("".concat("/vax-track","/data/world-data.json")).then(e=>e.json());e({originalData:t,mapData:t.map(e=>({name:e.country,value:parseFloat(e.uptake.replace("%","")),details:e}))})}}))},8255:(e,t,a)=>{a.d(t,{o:()=>r});var r=function(e){return e.NIRSEVIMAB="nirsevimab",e.OLD_ADULTS="RSV vaccine for older adults",e.MATERNAL="RSV maternal vaccine",e}({})},6802:e=>{e.exports=JSON.parse('{"K":"loading data..."}')}}]);